<!DOCTYPE html>
<html>
  <head>
    <title>ESP32 Web Server</title>
  </head>
  <body>
    <h1>ESP32 Web Server</h1>
    <p>Current LED state: <span id="ledState">UNKNOWN</span></p>
    <p><a href="#" id="ledOnButton"><button>Turn LED ON</button></a></p>
    <p><a href="#" id="ledOffButton"><button>Turn LED OFF</button></a></p>

    <script>
      const esp32Ip = 'http://ESP32_IP_ADDRESS';  // Replace with your ESP32's IP address

      // Fetch the current LED state from ESP32
      function updateLEDState() {
        fetch(`${esp32Ip}/LED/state`)
          .then(response => response.text())
          .then(state => {
            document.getElementById('ledState').textContent = state;
          })
          .catch(err => console.log(err));
      }

      // Turn LED ON
      document.getElementById('ledOnButton').addEventListener('click', function(event) {
        event.preventDefault();
        fetch(`${esp32Ip}/LED/on`)
          .then(() => updateLEDState())  // After turning on, update the state
          .catch(err => console.log(err));
      });

      // Turn LED OFF
      document.getElementById('ledOffButton').addEventListener('click', function(event) {
        event.preventDefault();
        fetch(`${esp32Ip}/LED/off`)
          .then(() => updateLEDState())  // After turning off, update the state
          .catch(err => console.log(err));
      });

      // Initial fetch of the LED state
      updateLEDState();
    </script>
  </body>
</html>
